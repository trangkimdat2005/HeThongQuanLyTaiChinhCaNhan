<link href="~/user/css//Profile.css" rel="stylesheet" />


<div class="d-flex justify-content-between align-items-center mb-4">
	<div>
		<h3 class="fw-bold text-dark mb-0">Hồ Sơ Của Tôi</h3>
		<p class="text-muted small mb-0">Quản lý thông tin tài khoản và bảo mật</p>
	</div>
</div>

<div class="row">
	<div class="col-lg-4 mb-4">
		<div class="card border-0 shadow-sm text-center h-100">
			<div class="card-body d-flex flex-column align-items-center justify-content-center">

				<div class="position-relative mb-3">
					<img src="https://ui-avatars.com/api/?name=User&background=random" class="rounded-circle border border-4 border-light shadow-sm" width="130" height="130" id="profileAvatar" style="object-fit: cover;">

					<label for="uploadAvatar" class="avatar-upload-btn shadow-sm" title="Đổi ảnh đại diện">
						<i class="fas fa-camera text-primary"></i>
						<input type="file" id="uploadAvatar" class="d-none" accept="image/*">
					</label>
				</div>

				<h4 class="fw-bold text-dark mb-1" id="displayFullName">Loading...</h4>
				<div class="mb-3">
					<span class="badge bg-primary bg-opacity-10 text-primary px-3 py-1 rounded-pill border border-primary border-opacity-25" id="displayRole">User</span>
				</div>

				<div class="d-flex justify-content-center gap-3 w-100 px-3 mt-2">
					<div class="text-center px-3 border-end">
						<div class="small text-muted text-uppercase fw-bold">Tham gia</div>
						<div class="fw-bold text-dark" id="displayJoinDate">...</div>
					</div>
					<div class="text-center px-3">
						<div class="small text-muted text-uppercase fw-bold">Online cuối</div>
						<div class="fw-bold text-success" id="displayLastLogin">...</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="col-lg-8">
		<div class="card border-0 shadow-sm h-100">
			<div class="card-header bg-white py-3 border-bottom-0">
				<ul class="nav nav-tabs card-header-tabs" id="profileTab" role="tablist">
					<li class="nav-item">
						<button class="nav-link active fw-bold" id="info-tab" data-bs-toggle="tab" data-bs-target="#info" type="button">
							<i class="fas fa-user-edit me-2"></i>Thông Tin Cá Nhân
						</button>
					</li>
					<li class="nav-item">
						<button class="nav-link fw-bold text-danger" id="security-tab" data-bs-toggle="tab" data-bs-target="#security" type="button">
							<i class="fas fa-shield-alt me-2"></i>Bảo Mật & Mật Khẩu
						</button>
					</li>
				</ul>
			</div>

			<div class="card-body">
				<div class="tab-content" id="profileTabContent">

					<div class="tab-pane fade show active" id="info" role="tabpanel">
						<form id="updateInfoForm">
							@Html.AntiForgeryToken()
							<div class="mb-3">
								<label class="form-label small fw-bold text-muted">Email đăng nhập (Không thể sửa)</label>
								<div class="input-group">
									<span class="input-group-text bg-light border-end-0"><i class="fas fa-envelope text-muted"></i></span>
									<input type="email" class="form-control bg-light border-start-0" id="userEmail" readonly>
								</div>
							</div>

							<div class="mb-3">
								<label class="form-label small fw-bold">Họ và tên (FullName)</label>
								<input type="text" class="form-control fw-bold" id="fullName" name="fullName">
							</div>

							<div class="row mb-3">
								<div class="col-md-6">
									<label class="form-label small fw-bold">Ngày sinh (DateOfBirth)</label>
									<input type="date" class="form-control" id="dob" name="dob">
								</div>
								<div class="col-md-6">
									<label class="form-label small fw-bold">Quốc gia (Country)</label>
									<input type="text" class="form-control" id="country" name="country">
								</div>
							</div>

							<div class="row mb-4">
								<div class="col-md-6">
									<label class="form-label small fw-bold">Thành phố (City)</label>
									<input type="text" class="form-control" id="city" name="city">
								</div>
								<div class="col-md-6">
									<label class="form-label small fw-bold">Địa chỉ chi tiết (Address)</label>
									<input type="text" class="form-control" id="address" name="address">
								</div>
							</div>

							<div class="text-end pt-3 border-top">
								<button type="submit" class="btn btn-primary fw-bold shadow-sm px-4">
									<i class="fas fa-save me-2"></i>Lưu Thay Đổi
								</button>
							</div>
						</form>
					</div>

					<div class="tab-pane fade" id="security" role="tabpanel">
						<form id="changePassForm">
							@Html.AntiForgeryToken()
							<div class="alert alert-warning border-0 d-flex align-items-center mb-4" role="alert">
								<i class="fas fa-lock me-3 fs-4"></i>
								<div>
									<div class="fw-bold">Lưu ý quan trọng</div>
									<small>Mật khẩu mạnh cần có ít nhất 8 ký tự, bao gồm chữ hoa, chữ thường và số.</small>
								</div>
							</div>

							<div class="mb-3">
								<label class="form-label small fw-bold">Mật khẩu hiện tại</label>
								<div class="input-group">
									<input type="password" class="form-control" id="currentPass" name="currentPass" required>
									<button class="btn btn-outline-secondary" type="button" onclick="togglePass('currentPass')"><i class="fas fa-eye"></i></button>
								</div>
							</div>

							<div class="mb-3">
								<label class="form-label small fw-bold">Mật khẩu mới</label>
								<div class="input-group">
									<input type="password" class="form-control" id="newPass" name="newPass" required>
									<button class="btn btn-outline-secondary" type="button" onclick="togglePass('newPass')"><i class="fas fa-eye"></i></button>
								</div>
							</div>

							<div class="mb-4">
								<label class="form-label small fw-bold">Xác nhận mật khẩu mới</label>
								<div class="input-group">
									<input type="password" class="form-control" id="confirmPass" required>
									<button class="btn btn-outline-secondary" type="button" onclick="togglePass('confirmPass')"><i class="fas fa-eye"></i></button>
								</div>
							</div>

							<div class="text-end pt-3 border-top">
								<button type="submit" class="btn btn-danger fw-bold shadow-sm px-4">
									<i class="fas fa-key me-2"></i>Cập Nhật Mật Khẩu
								</button>
							</div>
						</form>
					</div>

				</div>
			</div>
		</div>
	</div>
</div>


@section Scripts
{
	<script src="~/user/js/Profile.js"></script>
}