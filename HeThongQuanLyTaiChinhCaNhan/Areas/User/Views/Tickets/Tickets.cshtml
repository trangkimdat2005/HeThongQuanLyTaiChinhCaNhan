

<link href="~/user/css/Tickets.css" rel="stylesheet" />


<div class="d-flex justify-content-between align-items-center mb-4">
	<div>
		<h3 class="fw-bold text-dark mb-0">Trung Tâm Hỗ Trợ</h3>
		<p class="text-muted small mb-0">Gửi yêu cầu và theo dõi tiến độ xử lý</p>
	</div>
	<button class="btn btn-primary shadow-sm fw-bold rounded-pill px-4" onclick="openCreateTicketModal()">
		<i class="fas fa-plus me-2"></i> Gửi Yêu Cầu Mới
	</button>
</div>

<div class="row g-4 mb-4">
	<div class="col-md-4">
		<div class="card border-0 shadow-sm border-start border-4 border-primary h-100">
			<div class="card-body">
				<div class="d-flex align-items-center">
					<div class="flex-grow-1">
						<div class="small fw-bold text-primary text-uppercase mb-1">Tổng yêu cầu</div>
						<div class="h3 mb-0 fw-bold text-gray-800" id="statTotal">0</div>
					</div>
					<div class="text-gray-300">
						<i class="fas fa-ticket-alt fa-2x opacity-25"></i>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="col-md-4">
		<div class="card border-0 shadow-sm border-start border-4 border-warning h-100">
			<div class="card-body">
				<div class="d-flex align-items-center">
					<div class="flex-grow-1">
						<div class="small fw-bold text-warning text-uppercase mb-1">Đang chờ xử lý</div>
						<div class="h3 mb-0 fw-bold text-gray-800" id="statPending">0</div>
					</div>
					<div class="text-gray-300">
						<i class="fas fa-clock fa-2x opacity-25"></i>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="col-md-4">
		<div class="card border-0 shadow-sm border-start border-4 border-success h-100">
			<div class="card-body">
				<div class="d-flex align-items-center">
					<div class="flex-grow-1">
						<div class="small fw-bold text-success text-uppercase mb-1">Đã giải quyết</div>
						<div class="h3 mb-0 fw-bold text-gray-800" id="statResolved">0</div>
					</div>
					<div class="text-gray-300">
						<i class="fas fa-check-circle fa-2x opacity-25"></i>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="card border-0 shadow-sm">
	<div class="card-header bg-white py-3 border-bottom-0">
		<h6 class="m-0 fw-bold text-dark"><i class="fas fa-history me-2"></i>Lịch sử yêu cầu</h6>
	</div>
	<div class="card-body p-0">
		<div class="table-responsive">
			<table class="table table-hover align-middle mb-0">
				<thead class="bg-light text-muted small text-uppercase">
					<tr>
						<th class="ps-4">Mã số</th>
						<th>Vấn đề</th>
						<th>Nội dung tóm tắt</th>
						<th>Ngày gửi</th>
						<th>Trạng thái</th>
						<th class="text-end pe-4">Chi tiết</th>
					</tr>
				</thead>
				<tbody id="ticketListBody">
				</tbody>
			</table>
		</div>
	</div>
</div>

<div class="modal fade" id="createTicketModal" tabindex="-1">
	<div class="modal-dialog modal-dialog-centered">
		<div class="modal-content border-0 shadow">
			<div class="modal-header bg-primary text-white">
				<h5 class="modal-title fw-bold fs-6"><i class="fas fa-headset me-2"></i>Gửi Yêu Cầu Hỗ Trợ</h5>
				<button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
			</div>
			<div class="modal-body">
				<form id="createTicketForm">

					<div class="mb-3">
						<label class="form-label fw-bold small">Bạn gặp vấn đề gì?</label>
						<select class="form-select" id="ticketType" required>
							<option value="">-- Chọn loại vấn đề --</option>
							<option value="Technical Issue">Lỗi kỹ thuật (Web lỗi, không vào được...)</option>
							<option value="Account">Tài khoản (Quên pass, đổi email...)</option>
							<option value="Payment">Thanh toán (Nạp tiền lỗi, sai số dư...)</option>
							<option value="Other">Khác</option>
						</select>
					</div>

					<div class="mb-3">
						<label class="form-label fw-bold small">Muốn nhận phản hồi qua đâu?</label>
						<div class="d-flex gap-3">
							<div class="form-check">
								<input class="form-check-input" type="radio" name="respondType" id="resEmail" value="Email" checked>
								<label class="form-check-label" for="resEmail">Email</label>
							</div>
							<div class="form-check">
								<input class="form-check-input" type="radio" name="respondType" id="resPhone" value="Phone">
								<label class="form-check-label" for="resPhone">Điện thoại</label>
							</div>
						</div>
					</div>

					<div class="mb-3">
						<label class="form-label fw-bold small">Mô tả chi tiết</label>
						<textarea class="form-control" id="ticketDesc" rows="5" placeholder="Vui lòng mô tả rõ vấn đề để chúng tôi hỗ trợ nhanh nhất..." required></textarea>
					</div>

					<div class="alert alert-light border small text-muted">
						<i class="fas fa-info-circle me-1"></i> Admin sẽ liên hệ lại với bạn trong vòng 24h làm việc.
					</div>

					<div class="d-grid">
						<button type="submit" class="btn btn-primary fw-bold shadow-sm">Gửi Yêu Cầu</button>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>

<div class="modal fade" id="viewTicketModal" tabindex="-1">
	<div class="modal-dialog modal-dialog-centered">
		<div class="modal-content border-0 shadow">
			<div class="modal-body p-4">
				<div class="d-flex justify-content-between align-items-center mb-3">
					<h5 class="fw-bold mb-0 text-primary">Ticket #<span id="viewID"></span></h5>
					<span class="badge" id="viewStatusBadge">Status</span>
				</div>

				<div class="mb-3">
					<div class="small text-muted fw-bold text-uppercase">Vấn đề</div>
					<div class="fw-bold text-dark" id="viewType">...</div>
				</div>

				<div class="mb-3">
					<div class="small text-muted fw-bold text-uppercase">Ngày gửi</div>
					<div id="viewDate">...</div>
				</div>

				<div class="mb-4">
					<div class="small text-muted fw-bold text-uppercase">Nội dung</div>
					<div class="p-3 bg-light rounded border mt-1" id="viewDesc">
						...
					</div>
				</div>

				<div class="text-end">
					<button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">Đóng</button>
				</div>
			</div>
		</div>
	</div>
</div>

@section Scripts
{
	<script src="~/user/js/Tickets.js"></script>
}